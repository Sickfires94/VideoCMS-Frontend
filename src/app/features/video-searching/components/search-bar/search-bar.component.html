<!-- src/app/features/video-searching/components/search-bar/search-bar.component.html -->
<form (ngSubmit)="onSearch()" class="space-y-4">
  <div class="flex flex-col sm:flex-row gap-4 items-center">
    <!-- Search Input with Autocomplete -->
    <div class="relative flex-grow w-full">
      <input
        type="text"
        [formControl]="searchFormControl"
        placeholder="Search for videos..."
        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-200"
        (focus)="showSuggestions = true"
        (blur)="onSearchInputBlur()"
      >
      <!-- Autocomplete Suggestions List -->
      <div *ngIf="showSuggestions && (suggestedTerms.length > 0 || isLoadingSuggestions)"
           class="absolute z-10 w-full bg-white border border-gray-200 rounded-md shadow-lg mt-1 max-h-60 overflow-y-auto">
        <div *ngIf="isLoadingSuggestions" class="p-2 text-gray-500 text-center">Loading suggestions...</div>
        <ng-container *ngIf="!isLoadingSuggestions">
          <div *ngIf="suggestedTerms.length === 0" class="px-4 py-2 text-gray-500">No suggestions</div>
          <div *ngFor="let term of suggestedTerms"
               class="px-4 py-2 cursor-pointer hover:bg-gray-100"
               (mousedown)="onSearchTermSelect(term)">
            {{ term }}
          </div>
        </ng-container>
      </div>
      <!-- Clear Search Button (Optional) -->
      <button *ngIf="searchFormControl.value" type="button" (click)="clearSearchTerm()" 
              class="absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
        </svg>
      </button>
    </div>

    <!-- Search Button -->
    <button
      type="button"
      (click)="onSearch()"
      class="w-full sm:w-auto px-6 py-2 bg-blue-600 text-white rounded-md shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-200"
    >
      Search
    </button>
  </div>
</form>